<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="xmap">
<title>Visualising Crossmap Transformations • xmap</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualising Crossmap Transformations">
<meta property="og:description" content="xmap">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">xmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/xmap.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/making-xmaps.html">Intro to Crossmaps</a>
    <a class="dropdown-item" href="../articles/vis-xmaps.html">Visualising Crossmap Transformations</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cynthiahqy/xmap/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Visualising Crossmap Transformations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cynthiahqy/xmap/blob/main/vignettes/vis-xmaps.Rmd" class="external-link"><code>vignettes/vis-xmaps.Rmd</code></a></small>
      <div class="d-none name"><code>vis-xmaps.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="alternative-representations-of-crossmaps">Alternative representations of Crossmaps<a class="anchor" aria-label="anchor" href="#alternative-representations-of-crossmaps"></a>
</h2>
<p>Crossmaps aim to encode dataset integration and harmonisation choices
separately to the code used to apply those such designs to data. It
follows that visualisations and plots of the candidate crossmaps could
be useful during the design process. For instance, Sankey diagrams are
sometimes used to visualise schema crosswalks.</p>
<p>This article provides a few ggplot2 code examples for visualising
crossmaps. The package will offer functions for generating these
visualisations from <code>xmap</code> objects in future releases.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ggbump</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cynthiahqy/xmap" class="external-link">xmap</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="table">Table<a class="anchor" aria-label="anchor" href="#table"></a>
</h3>
<p>Let’s start with visualising a section of the ANZSCO22 to ISCO8
crosswalk published by the Australian Bureau of Statistics:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">anzsco_cw</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>      <span class="op">~</span><span class="va">anzsco22</span>,                        <span class="op">~</span><span class="va">anzsco22_descr</span>, <span class="op">~</span><span class="va">isco8</span>, <span class="op">~</span><span class="va">partial</span>,                                         <span class="op">~</span><span class="va">isco8_descr</span>,</span>
<span>       <span class="st">"111111"</span>, <span class="st">"Chief Executive or Managing Director"</span>, <span class="st">"1112"</span>,      <span class="st">"p"</span>,                        <span class="st">"Senior government officials"</span>,</span>
<span>       <span class="st">"111111"</span>, <span class="st">"Chief Executive or Managing Director"</span>, <span class="st">"1114"</span>,      <span class="st">"p"</span>, <span class="st">"Senior officials of special-interest organizations"</span>,</span>
<span>       <span class="st">"111111"</span>, <span class="st">"Chief Executive or Managing Director"</span>, <span class="st">"1120"</span>,      <span class="st">"p"</span>,            <span class="st">"Managing directors and chief executives"</span>,</span>
<span>       <span class="st">"111211"</span>,            <span class="st">"Corporate General Manager"</span>, <span class="st">"1112"</span>,      <span class="st">"p"</span>,                        <span class="st">"Senior government officials"</span>,</span>
<span>       <span class="st">"111211"</span>,            <span class="st">"Corporate General Manager"</span>, <span class="st">"1114"</span>,      <span class="st">"p"</span>, <span class="st">"Senior officials of special-interest organizations"</span>,</span>
<span>       <span class="st">"111211"</span>,            <span class="st">"Corporate General Manager"</span>, <span class="st">"1120"</span>,      <span class="st">"p"</span>,            <span class="st">"Managing directors and chief executives"</span>,</span>
<span>       <span class="st">"111212"</span>,         <span class="st">"Defence Force Senior Officer"</span>, <span class="st">"0110"</span>,      <span class="st">"p"</span>,                 <span class="st">"Commissioned armed forces officers"</span>,</span>
<span>       <span class="st">"111311"</span>,          <span class="st">"Local Government Legislator"</span>, <span class="st">"1111"</span>,      <span class="st">"p"</span>,                                        <span class="st">"Legislators"</span>,</span>
<span>       <span class="st">"111312"</span>,                 <span class="st">"Member of Parliament"</span>, <span class="st">"1111"</span>,      <span class="st">"p"</span>,                                        <span class="st">"Legislators"</span>,</span>
<span>       <span class="st">"111399"</span>,                      <span class="st">"Legislators nec"</span>, <span class="st">"1111"</span>,      <span class="st">"p"</span>,                                        <span class="st">"Legislators"</span></span>
<span>      <span class="op">)</span></span>
<span></span>
<span><span class="va">links</span> <span class="op">&lt;-</span> <span class="va">anzsco_cw</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">anzsco22</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n_dest <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">isco8</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">anzsco22</span>, weight <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">n_dest</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">anzsco_cw</span>, by <span class="op">=</span> <span class="st">"anzsco22"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## get code tables</span></span>
<span><span class="va">table_anzsco</span> <span class="op">&lt;-</span> <span class="va">anzsco_cw</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">anzsco22</span>, <span class="va">anzsco22_descr</span><span class="op">)</span></span>
<span><span class="va">table_isco8</span> <span class="op">&lt;-</span> <span class="va">anzsco_cw</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">isco8</span>, <span class="va">isco8_descr</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## make xmap</span></span>
<span><span class="va">anzsco_xmap</span> <span class="op">&lt;-</span> <span class="va">links</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_xmap.html">as_xmap_df</a></span><span class="op">(</span><span class="va">anzsco22</span>, <span class="va">isco8</span>, <span class="va">weight</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Dropped additional columns in `links`</span></span></code></pre>
<p>The included <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for <code>xmap_df</code>
objects:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">anzsco_xmap</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## xmap_df:</span></span>
<span><span class="co">## recode, split, and collapse  </span></span>
<span><span class="co">## (anzsco22 -&gt; isco8) BY weight</span></span>
<span><span class="co">##    anzsco22 isco8    weight</span></span>
<span><span class="co">## 1    111111  1112 0.3333333</span></span>
<span><span class="co">## 2    111111  1114 0.3333333</span></span>
<span><span class="co">## 3    111111  1120 0.3333333</span></span>
<span><span class="co">## 4    111211  1112 0.3333333</span></span>
<span><span class="co">## 5    111211  1114 0.3333333</span></span>
<span><span class="co">## 6    111211  1120 0.3333333</span></span>
<span><span class="co">## 7    111212  0110 1.0000000</span></span>
<span><span class="co">## 8    111311  1111 1.0000000</span></span>
<span><span class="co">## 9    111312  1111 1.0000000</span></span>
<span><span class="co">## 10   111399  1111 1.0000000</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="bigraph">Bigraph<a class="anchor" aria-label="anchor" href="#bigraph"></a>
</h3>
<p>Visualisation as a bigraph is particularly useful for seeing the
relations between the two nomenclature.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.bigraph_add_link_style</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">edges</span>, <span class="va">x_attrs</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co">## generate out link type</span></span>
<span>  <span class="va">style_out_case</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">out_case</span>, <span class="op">~</span><span class="va">line_type</span>, <span class="op">~</span><span class="va">font_type</span>,</span>
<span>    <span class="st">"unit_out"</span>, <span class="st">"solid"</span>, <span class="st">"bold"</span>,</span>
<span>    <span class="st">"frac_out"</span>, <span class="st">"dashed"</span>, <span class="st">"italic"</span><span class="op">)</span></span>
<span>  <span class="va">edges</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>out_case <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"unit_out"</span>,</span>
<span>                                              <span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"frac_out"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">style_out_case</span>,</span>
<span>              by <span class="op">=</span> <span class="st">"out_case"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">.bigraph_add_node_positions</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">edges</span>, <span class="va">x_attrs</span>, <span class="va">pos_from</span>, <span class="va">pos_to</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co">## attach node positions</span></span>
<span>  <span class="va">edges</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">pos_from</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="st">"from_set"</span>, <span class="va">x_attrs</span><span class="op">$</span><span class="va">col_from</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">pos_to</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="st">"to_set"</span>, <span class="va">x_attrs</span><span class="op">$</span><span class="va">col_to</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>from_x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                  to_x <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>idx <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">plt_xmap_bigraph</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_xmap.html">is_xmap_df</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">x_attrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">edges_short</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">df_out_style</span> <span class="op">&lt;-</span> <span class="fu">.bigraph_add_link_style</span><span class="op">(</span><span class="va">edges_short</span>, <span class="va">x_attrs</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## generate node positions</span></span>
<span>  <span class="va">from_nodes</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>from_set <span class="op">=</span> <span class="va">x_attrs</span><span class="op">$</span><span class="va">from_set</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>from_y <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">to_nodes</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>to_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">x</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_to</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>to_y <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">df_gg</span> <span class="op">&lt;-</span> <span class="fu">.bigraph_add_node_positions</span><span class="op">(</span><span class="va">df_out_style</span>, <span class="va">x_attrs</span>,</span>
<span>                                       <span class="va">from_nodes</span>, <span class="va">to_nodes</span><span class="op">)</span></span>
<span>  <span class="co">## build ggplot</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_gg</span>,</span>
<span>                  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">from_x</span>, xend <span class="op">=</span> <span class="va">to_x</span>,</span>
<span>                      y <span class="op">=</span> <span class="va">from_y</span>, yend <span class="op">=</span> <span class="va">to_y</span>,</span>
<span>                      group <span class="op">=</span> <span class="va">idx</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## edges</span></span>
<span>    <span class="fu">ggbump</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggbump/man/geom_sigmoid.html" class="external-link">geom_sigmoid</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">line_type</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df_gg</span>, <span class="va">out_case</span> <span class="op">==</span> <span class="st">"unit_out"</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">(</span><span class="va">from_x</span> <span class="op">+</span> <span class="va">to_x</span><span class="op">)</span> <span class="op">/</span> <span class="fl">4</span>,</span>
<span>                 y <span class="op">=</span> <span class="va">from_y</span>,</span>
<span>                 label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df_gg</span>, <span class="va">out_case</span> <span class="op">==</span> <span class="st">"frac_out"</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="va">from_x</span> <span class="op">+</span> <span class="va">to_x</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">to_x</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span>,</span>
<span>                 y <span class="op">=</span> <span class="va">to_y</span>,</span>
<span>                 label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## from nodes</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">from_x</span> <span class="op">-</span> <span class="fl">0.5</span>, y <span class="op">=</span> <span class="va">from_y</span>,</span>
<span>                           label <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_from</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                           fontface<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">font_type</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      <span class="co">## drop idx groups to avoid duplicate labels</span></span>
<span>                      stat <span class="op">=</span> <span class="st">"unique"</span>, inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">## to nodes</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">to_x</span> <span class="op">+</span> <span class="fl">0.5</span>, y <span class="op">=</span> <span class="va">to_y</span>, </span>
<span>                            label <span class="op">=</span> <span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_to</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                        fill <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>                        alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_reverse</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>        panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        plot.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="vis-xmaps_files/figure-html/unnamed-chunk-6-1.png" width="100%"></p>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">anzsco22</th>
<th align="left">anzsco22_descr</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">111111</td>
<td align="left">Chief Executive or Managing Director</td>
</tr>
<tr class="even">
<td align="left">111211</td>
<td align="left">Corporate General Manager</td>
</tr>
<tr class="odd">
<td align="left">111212</td>
<td align="left">Defence Force Senior Officer</td>
</tr>
<tr class="even">
<td align="left">111311</td>
<td align="left">Local Government Legislator</td>
</tr>
<tr class="odd">
<td align="left">111312</td>
<td align="left">Member of Parliament</td>
</tr>
<tr class="even">
<td align="left">111399</td>
<td align="left">Legislators nec</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">isco8</th>
<th align="left">isco8_descr</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1112</td>
<td align="left">Senior government officials</td>
</tr>
<tr class="even">
<td align="left">1114</td>
<td align="left">Senior officials of special-interest organizations</td>
</tr>
<tr class="odd">
<td align="left">1120</td>
<td align="left">Managing directors and chief executives</td>
</tr>
<tr class="even">
<td align="left">0110</td>
<td align="left">Commissioned armed forces officers</td>
</tr>
<tr class="odd">
<td align="left">1111</td>
<td align="left">Legislators</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody></table>
<p>This visualisation also has benefits over the traditionally used
Sankey diagram. Sankey diagrams are often used to illustrated “flows”
between nodes. However, variable link widths can actually clutter the
visualisation of crosswalks. Consider this simple crossmap that might be
used to harmonise national accounts data (e.g. GDP) across two time
periods.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span><span class="op">~</span><span class="va">ctr</span>, <span class="op">~</span><span class="va">ctr2</span>, <span class="op">~</span><span class="va">split</span>,</span>
<span>                 <span class="st">"BLX"</span>, <span class="st">"BEL"</span>, <span class="fl">0.5</span>,</span>
<span>                 <span class="st">"BLX"</span>, <span class="st">"LUX"</span>, <span class="fl">0.5</span>,</span>
<span>                 <span class="st">"E.GER"</span>, <span class="st">"DEU"</span>, <span class="fl">1</span>,</span>
<span>                 <span class="st">"W.GER"</span>, <span class="st">"DEU"</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="https://raw.githubusercontent.com/cynthiahqy/viz-panel-maps/57272c61692ece2d2b94874d12fe7f0619c6e864/docs/plots/viz-country-concord/ggsankey.png" style="width:100.0%"></p>
<p>On the other hand, the bigraph visualisation shows more clearly how
data is modified (or not) when harmonising between nomenclature. The
solid lines show when a link does not modify the source values, whilst
the dotted line style indicates that data will be split up. Furthermore,
by using fixed width links, there is room to place labels on-top of each
curve indicated the transformation weights.</p>
<p><img src="https://raw.githubusercontent.com/cynthiahqy/viz-panel-maps/workflowr/docs/plots/ggbump-sigmoid-graph-edges.jpg" style="width:100.0%"></p>
</div>
<div class="section level3">
<h3 id="matrix">Matrix<a class="anchor" aria-label="anchor" href="#matrix"></a>
</h3>
<p>Another useful visualisation or representation of a crossmap is as an
incidence matrix with the source nomenclature indexed along the rows and
the target nomenclature indexed on the columns:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plt_xmap_ggmatrix</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_xmap.html">is_xmap_df</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">x_attrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="va">edges_complete</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html" class="external-link">complete</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_from</span><span class="op">]</span><span class="op">]</span>, <span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_to</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## add link-out type</span></span>
<span>  <span class="va">gg_df</span> <span class="op">&lt;-</span> <span class="va">edges_complete</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>out_case <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"one-to-one"</span>,</span>
<span>                                              <span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"one-to-many"</span>,</span>
<span>                                              <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">~</span> <span class="st">"none"</span><span class="op">)</span></span>
<span>                  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">## make plot</span></span>
<span>  <span class="va">gg_df</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_to</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                      y<span class="op">=</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_from</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">out_case</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>limits<span class="op">=</span><span class="va">rev</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>position<span class="op">=</span><span class="st">'top'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span><span class="op">)</span>  <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x_attrs</span><span class="op">$</span><span class="va">col_to</span>, y <span class="op">=</span> <span class="va">x_attrs</span><span class="op">$</span><span class="va">col_from</span>, fill<span class="op">=</span><span class="st">"Outgoing Link Type"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gg_df</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">.data</span><span class="op">[[</span><span class="va">x_attrs</span><span class="op">$</span><span class="va">col_weights</span><span class="op">]</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>        panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plt_xmap_ggmatrix</span><span class="op">(</span><span class="va">anzsco_xmap</span><span class="op">)</span></span></code></pre></div>
<p><img src="vis-xmaps_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Notice that the requirement that a valid crossmap has outgoing
weights which sum to 1 for each source node is equivalent to a
requirement that the total of weights across each row sums to 1.</p>
<p><img src="plot-weight-sum-matrix.png" style="width:100.0%"></p>
</div>
</div>
<div class="section level2">
<h2 id="visualising-types-of-mapping-relations">Visualising Types of Mapping Relations<a class="anchor" aria-label="anchor" href="#visualising-types-of-mapping-relations"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">gg_recode</span> <span class="op">+</span> <span class="va">gg_agg</span> <span class="op">+</span> <span class="va">gg_disagg</span></span></code></pre></div>
<p><img src="vis-xmaps_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.cynthiahqy.com" class="external-link">Cynthia Huang</a>, <a href="https://sites.google.com/site/laurapuzzello" class="external-link">Laura Puzzello</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
